{"ast":null,"code":"var _jsxFileName = \"C:\\\\Github\\\\rushikersclub-web\\\\frontend\\\\src\\\\components\\\\AdminPanel\\\\adminPanel.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport './adminPanel.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminPanel = () => {\n  _s();\n  const [pendingPosts, setPendingPosts] = useState([]);\n  const navigate = useNavigate();\n  // const token = localStorage.getItem('token'); \n  // const storedUser = JSON.parse(localStorage.getItem('user')); \n  const {\n    error,\n    isAuthenticated,\n    user\n  } = useSelector(state => state.auth);\n  useEffect(() => {\n    if (!isAuthenticated || !user) {\n      alert('You are not authenticated!');\n      navigate('/login'); // Redirect to login\n      return;\n    }\n    if (user.role !== 'admin') {\n      alert('Access Denied: Admins only');\n      navigate('/'); // Redirect to home\n      return;\n    }\n    const fetchPendingPosts = async () => {\n      try {\n        const token = localStorage.getItem('token'); // Get the token from localStorage\n        if (!token) {\n          throw new Error('No token found');\n        }\n        console.log('Token:', token); // Log the token for debugging\n\n        const response = await axios.get('https://rushikersclub-web.vercel.app/api/v1/magazine/pending', {\n          headers: {\n            Authorization: `Bearer ${token}` // Include the token in the request headers\n          },\n          withCredentials: true\n        });\n        console.log('Response:', response); // Log the response for debugging\n\n        setPendingPosts(response.data.pendingPosts);\n      } catch (error) {\n        console.error('Error fetching pending posts:', error);\n        if (error.response) {\n          console.error('Error response data:', error.response.data);\n          console.error('Error response status:', error.response.status);\n          console.error('Error response headers:', error.response.headers);\n          alert('Failed to fetch pending posts. Please try again.');\n        }\n      }\n    };\n    fetchPendingPosts();\n  }, [error, isAuthenticated, user, navigate]);\n  const handleApprove = async id => {\n    try {\n      const token = localStorage.getItem('token'); // Get the token from localStorage\n      if (!token) {\n        throw new Error('No token found');\n      }\n      await axios.put(`https://rushikersclub-web.vercel.app/api/v1/magazine/approve/${id}`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}` // Include the token in the request headers\n        },\n        withCredentials: true\n      });\n      setPendingPosts(pendingPosts.filter(post => post._id !== id));\n      alert('Post approved successfully.');\n    } catch (error) {\n      console.error('Error approving post:', error);\n      alert('Approval failed.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-panel\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Pending Posts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pending-posts-grid\",\n      children: pendingPosts.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: post.image,\n          alt: post.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: post.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: post.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"approve-button\",\n            onClick: () => handleApprove(post._id),\n            children: \"Approve\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this)]\n      }, post._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminPanel, \"Pxt+oWjixJLRZcRaQVRw5HRsAFQ=\", false, function () {\n  return [useNavigate, useSelector];\n});\n_c = AdminPanel;\nexport default AdminPanel;\nvar _c;\n$RefreshReg$(_c, \"AdminPanel\");","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","useSelector","jsxDEV","_jsxDEV","AdminPanel","_s","pendingPosts","setPendingPosts","navigate","error","isAuthenticated","user","state","auth","alert","role","fetchPendingPosts","token","localStorage","getItem","Error","console","log","response","get","headers","Authorization","withCredentials","data","status","handleApprove","id","put","filter","post","_id","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","src","image","alt","title","description","onClick","_c","$RefreshReg$"],"sources":["C:/Github/rushikersclub-web/frontend/src/components/AdminPanel/adminPanel.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport './adminPanel.css';\r\n\r\nconst AdminPanel = () => {\r\n  const [pendingPosts, setPendingPosts] = useState([]);\r\n  const navigate = useNavigate();\r\n  // const token = localStorage.getItem('token'); \r\n  // const storedUser = JSON.parse(localStorage.getItem('user')); \r\n  const { error, isAuthenticated, user} = useSelector((state) => state.auth);\r\n  \r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated || !user) {\r\n      alert('You are not authenticated!');\r\n      navigate('/login'); // Redirect to login\r\n      return;\r\n    }\r\n\r\n    if (user.role !== 'admin') {\r\n      alert('Access Denied: Admins only');\r\n      navigate('/'); // Redirect to home\r\n      return;\r\n    }\r\n\r\n        const fetchPendingPosts = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token'); // Get the token from localStorage\r\n        if (!token) {\r\n          throw new Error('No token found');\r\n        }\r\n\r\n        console.log('Token:', token); // Log the token for debugging\r\n\r\n        const response = await axios.get('https://rushikersclub-web.vercel.app/api/v1/magazine/pending', {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`, // Include the token in the request headers\r\n          },\r\n          withCredentials: true,\r\n        });\r\n\r\n        console.log('Response:', response); // Log the response for debugging\r\n\r\n        setPendingPosts(response.data.pendingPosts);\r\n      } catch (error) {\r\n        console.error('Error fetching pending posts:', error);\r\n        if (error.response) {\r\n          console.error('Error response data:', error.response.data);\r\n          console.error('Error response status:', error.response.status);\r\n          console.error('Error response headers:', error.response.headers);\r\n          alert('Failed to fetch pending posts. Please try again.');\r\n        }\r\n      }\r\n    };\r\n    fetchPendingPosts();\r\n  }, [error, isAuthenticated, user, navigate]);\r\n\r\n  const handleApprove = async (id) => {\r\n    try {\r\n      const token = localStorage.getItem('token'); // Get the token from localStorage\r\n      if (!token) {\r\n        throw new Error('No token found');\r\n      }\r\n\r\n      await axios.put(`https://rushikersclub-web.vercel.app/api/v1/magazine/approve/${id}`, {}, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`, // Include the token in the request headers\r\n        },\r\n        withCredentials: true,\r\n      }\r\n      \r\n    );\r\n\r\n      setPendingPosts(pendingPosts.filter(post => post._id !== id));\r\n      alert('Post approved successfully.');\r\n    } catch (error) {\r\n      console.error('Error approving post:', error);\r\n      alert('Approval failed.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-panel\">\r\n      <h2>Pending Posts</h2>\r\n      <div className=\"pending-posts-grid\">\r\n        {pendingPosts.map(post => (\r\n          <div key={post._id} className=\"post-card\">\r\n            <img src={post.image} alt={post.title} />\r\n            <div className=\"post-content\">\r\n              <h3>{post.title}</h3>\r\n              <p>{post.description}</p>\r\n              <button className=\"approve-button\" onClick={() => handleApprove(post._id)}>\r\n                Approve\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}