{"ast":null,"code":"import axios from'axios';import{LOGIN_REQUEST,LOGIN_SUCCESS,LOGIN_FAILURE,REGISTER_USER_REQUEST,REGISTER_USER_SUCCESS,REGISTER_USER_FAILURE,LOAD_USER_REQUEST,LOAD_USER_SUCCESS,LOAD_USER_FAILURE,LOGOUT_SUCCESS,LOGOUT_FAILURE,CLEAR_ERRORS}from'../constants/userConstants';// Register user\nexport const register=userData=>async dispatch=>{try{dispatch({type:REGISTER_USER_REQUEST});const{data}=await axios.post('https://backend-amber-one-56.vercel.app/api/v1/register',userData,{headers:{'Content-Type':'application/json'}});dispatch({type:REGISTER_USER_SUCCESS,payload:data.user});}catch(error){var _error$response,_error$response$data;dispatch({type:REGISTER_USER_FAILURE,payload:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Registration failed'});}};// Login\nexport const login=(email,password)=>async dispatch=>{try{dispatch({type:LOGIN_REQUEST});const{data}=await axios.post('https://backend-amber-one-56.vercel.app/api/v1/login',{email,password},{headers:{'Content-Type':'application/json'},withCredentials:true});if(data){localStorage.setItem('token',data.token);dispatch({type:LOGIN_SUCCESS,payload:data.user});}else{throw new Error('Failed to login');}}catch(error){var _error$response2,_error$response2$data;dispatch({type:LOGIN_FAILURE,payload:((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Login failed'});}};// Load user\nexport const loadUser=()=>async dispatch=>{try{dispatch({type:LOAD_USER_REQUEST});const token=localStorage.getItem('token');if(!token)throw new Error(\"No token found, please log in.\");const{data}=await axios.get('https://backend-amber-one-56.vercel.app/api/v1/me',{headers:{Authorization:\"Bearer \".concat(token)},withCredentials:true});dispatch({type:LOAD_USER_SUCCESS,payload:data.user});}catch(error){var _error$response3,_error$response3$data;dispatch({type:LOAD_USER_FAILURE,payload:((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Failed to load user'});}};// Logout user\nexport const logout=()=>async dispatch=>{try{await axios.get('https://backend-amber-one-56.vercel.app/api/v1/logout',{withCredentials:true});localStorage.removeItem('token');dispatch({type:LOGOUT_SUCCESS});}catch(error){dispatch({type:LOGOUT_FAILURE,payload:'Logout failed'});}};// Clear errors\nexport const clearErrors=()=>dispatch=>{dispatch({type:CLEAR_ERRORS});};","map":{"version":3,"names":["axios","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","REGISTER_USER_REQUEST","REGISTER_USER_SUCCESS","REGISTER_USER_FAILURE","LOAD_USER_REQUEST","LOAD_USER_SUCCESS","LOAD_USER_FAILURE","LOGOUT_SUCCESS","LOGOUT_FAILURE","CLEAR_ERRORS","register","userData","dispatch","type","data","post","headers","payload","user","error","_error$response","_error$response$data","response","message","login","email","password","withCredentials","localStorage","setItem","token","Error","_error$response2","_error$response2$data","loadUser","getItem","get","Authorization","concat","_error$response3","_error$response3$data","logout","removeItem","clearErrors"],"sources":["C:/Github/rushikersclub-web/frontend/src/actions/authActions.js"],"sourcesContent":["import axios from 'axios';\r\nimport {\r\n    LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAILURE,\r\n    REGISTER_USER_REQUEST, REGISTER_USER_SUCCESS, REGISTER_USER_FAILURE,\r\n    LOAD_USER_REQUEST, LOAD_USER_SUCCESS, LOAD_USER_FAILURE,\r\n    LOGOUT_SUCCESS, LOGOUT_FAILURE,\r\n    CLEAR_ERRORS\r\n} from '../constants/userConstants';\r\n\r\n// Register user\r\nexport const register = (userData) => async (dispatch) => {\r\n    try {\r\n        dispatch({ type: REGISTER_USER_REQUEST });\r\n\r\n        const { data } = await axios.post('https://backend-amber-one-56.vercel.app/api/v1/register', userData, {\r\n            headers: { 'Content-Type': 'application/json' }\r\n        });\r\n\r\n        dispatch({ type: REGISTER_USER_SUCCESS, payload: data.user });\r\n\r\n    } catch (error) {\r\n        dispatch({\r\n            type: REGISTER_USER_FAILURE,\r\n            payload: error.response?.data?.message || 'Registration failed'\r\n        });\r\n    }\r\n};\r\n\r\n// Login\r\nexport const login = (email, password) => async (dispatch) => {\r\n    try {\r\n        dispatch({ type: LOGIN_REQUEST });\r\n\r\n        const { data } = await axios.post('https://backend-amber-one-56.vercel.app/api/v1/login', \r\n            { email, password }, \r\n            { headers: { 'Content-Type': 'application/json' }, withCredentials: true }\r\n        );\r\n\r\n        if (data) {\r\n            localStorage.setItem('token', data.token);\r\n            dispatch({ type: LOGIN_SUCCESS, payload: data.user });\r\n        } else {\r\n            throw new Error('Failed to login');\r\n        }\r\n    } catch (error) {\r\n        dispatch({\r\n            type: LOGIN_FAILURE,\r\n            payload: error.response?.data?.message || 'Login failed'\r\n        });\r\n    }\r\n};\r\n\r\n// Load user\r\nexport const loadUser = () => async (dispatch) => {\r\n    try {\r\n        dispatch({ type: LOAD_USER_REQUEST });\r\n\r\n        const token = localStorage.getItem('token');\r\n        if (!token) throw new Error(\"No token found, please log in.\");\r\n\r\n        const { data } = await axios.get('https://backend-amber-one-56.vercel.app/api/v1/me', {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n            withCredentials: true\r\n        });\r\n\r\n        dispatch({ type: LOAD_USER_SUCCESS, payload: data.user });\r\n\r\n    } catch (error) {\r\n        dispatch({\r\n            type: LOAD_USER_FAILURE,\r\n            payload: error.response?.data?.message || 'Failed to load user'\r\n        });\r\n    }\r\n};\r\n\r\n// Logout user\r\nexport const logout = () => async (dispatch) => {\r\n    try {\r\n        await axios.get('https://backend-amber-one-56.vercel.app/api/v1/logout', { withCredentials: true });\r\n        localStorage.removeItem('token');\r\n        dispatch({ type: LOGOUT_SUCCESS });\r\n    } catch (error) {\r\n        dispatch({ type: LOGOUT_FAILURE, payload: 'Logout failed' });\r\n    }\r\n};\r\n\r\n// Clear errors\r\nexport const clearErrors = () => (dispatch) => {\r\n    dispatch({ type: CLEAR_ERRORS });\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}